<!DOCTYPE html>
<html
  lang="ko"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <title>게시글 목록</title>
    <style>
      .board_table_title {
        text-decoration: none;
      }
      .board_table_title:hover {
        color: red;
      }
    </style>
  </head>

  <body th:align="center">
    <h1 class="h1">게시글 목록</h1>

    <span sec:authorize="isAuthenticated()">
      <b>
        <font color="red">
          <span sec:authentication="principal.member.name"></span>
        </font>
      </b>
      님 환영합니다!
      <div style="margin-top: 10px"></div>
      <a class="btn btn-primary btn-sm" th:href="@{/admin/adminPage}"
        >게시판관리</a
      >
      <a
        class="btn btn-danger btn-sm"
        data-bs-toggle="modal"
        data-bs-target="#logoutModal"
      >
        로그아웃
      </a>
      <!-- Modal -->
      <div
        class="modal fade"
        id="logoutModal"
        tabindex="-1"
        aria-labelledby="logoutModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="logoutModalLabel">로그아웃</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">로그아웃 하시겠습니까?</div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                아니요
              </button>
              <button
                type="button"
                class="btn btn-primary"
                th:onclick="'location.href=\'' + @{/system/logout} + '\''"
              >
                예
              </button>
            </div>
          </div>
        </div>
      </div>
    </span>

    <hr />

    <!-- 검색 시작 -->
    <form
      th:action="@{/board/getBoardList}"
      method="POST"
      style="margin-bottom: 20px"
    >
      <table
        th:align="center"
        border="1"
        th:cellpadding="0"
        th:cellspacing="0"
        th:width="700"
      >
        <tr>
          <td align="right">
            <select name="searchCondition">
              <option value="TITLE">제목</option>
              <option value="CONTENT">내용</option>
            </select>
            <input name="searchKeyword" type="text" />
            <input class="btn btn-primary btn-sm" type="submit" value="검색" />
          </td>
        </tr>
      </table>
    </form>
    <!-- 검색 종료 -->

    <table class="table table-striped">
      <tr>
        <th>번호</th>
        <th>제목</th>
        <th>작성자</th>
        <th>등록일</th>
        <th>조회수</th>
      </tr>

      <tr th:each="board, state : ${boardList}">
        <td th:text="${state.count}"></td>
        <td>
          <a
            th:href="@{/board/getBoard(seq=${board.seq})}"
            th:text="${board.title}"
            class="board_table_title"
          ></a>
        </td>
        <td th:text="${board.member.name}"></td>
        <td th:text="${#dates.format(board.createDate, 'yyyy-MM-dd')}"></td>
        <td th:text="${board.cnt}"></td>
      </tr>
    </table>
    <br />
    <a class="btn btn-primary btn-sm" th:href="@{/board/insertBoard}"
      >게시글 등록</a
    >
  </body>
  <script src="/js/bootstrap.bundle.min.js" type="text/javascript"></script>
</html>
